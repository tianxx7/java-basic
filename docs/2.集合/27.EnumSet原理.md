## 1. EnumSet怎么用,其基本原理是什么

EnumSet是一个Set集合的抽象类,其有两个实现类JumboEnumSet和RegualrEnumSet,在使用的时候放入的必须是枚举类型,其特点是速度非常快.特别注意之前有问题说过HashSet,TreeSet的实现原理都是对HashMap,TreeMap的封装实现,但是EnumSet的实现与EnumMap没有任何关系,EnumSet的默认子类实现原理查用了极为精简和高效的位向量方式

EnumSet的默认子类RegularEnumSet和JumboEnumSet实现原理都是基于位运算向量,位运算向量的原理就是用一个位表示一个元素的状态(元素状态只有两种),用一组表示一个集合的状态,每个位对应一个元素,譬如一个枚举类DemoEnum有6个枚举值,则EnumSet<DemoEnum> 集合就可以通过一个byte字节从右到左来表示,不用的位上用0填充,用的位上每个bit位代表一个枚举值,1表示包含该枚举值,0表示不含该枚举值.所以EnumSet抽象类的两个实现类RegularEnumSet和JumboEnumSet分别定义了不同的向量长度.RegualrEnumSet使用64位的long类型变量作为位向量,而JumboEnumSet使用一个long类型数组作为向量,故当我们通过EnumSet的工厂方法创建EnumSet集合时EnumSet会通过判断枚举类的枚举值决定使用两个子类的哪一个,如果枚举值个数小于等于64就用RegularEnumSet,大于64就用JumboEnumSet







































